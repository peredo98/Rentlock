<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
		<title>RENTLOCK</title>
		<link href="https://fonts.googleapis.com/css?family=Roboto:100,400" rel="stylesheet">
		<link href="css/estilos.css" rel="stylesheet">
		<script src="js/jquery.min.js"></script>
		<link href="css/jquery.bxslider.css" rel="stylesheet">
		<script src="js/jquery.bxslider.js"></script>
	</head>
	<body>
		<div id="wrapper">
			<div id="bar">
				<header>
					<div>
						<img  class="home" id="logo"src="images/logo.png" height="40vh">
						<text id="name">RENTLOCK</text>
						<input id="search" type="text" class="lupa" placeholder="Search...">

						<text  class="login place" id="usrprofile">Log in</text>
						<img src="Images/hamburger.png" class="hamburger" height="40vw">
					</div>
					<div>
						<ul id="hamburgermenu">
							<li class="login" id="usrprofile">Login</li>
							<li class="register" id="changing">Register</li>
							<li class="home">Home</li>
							<li>About</li>
							<li class="searchpage">Rent</li>
							<li class="rentout">Rent out</li>
							<li>Contact us</li>
							<li class="sc"><img src="images/sc.png" height="40vh"></li>
						</ul>
					</div>
				</header>
				<div id="sepbar">
				</div>
				<nav>
					<ul id="menu">
					<li class="sep"><select class="categories">
						<option value="Categories">Categories</option>
						<option value="Books">Books</option>
						<option value="Clothing">Clothing</option>
						<option value="Electronics">Electronics</option>
						<option value="Jewerly">Jewerly</option>
						<option value="Other">Other</option>
					</select></li>
					<li class="home">Home</li>
					<li>|</li>
					<li>About</li>
					<li>|</li>
					<li class="searchpage">Rent</li>
					<li>|</li>
					<li class="separate rentout">Rent out</li>
					<li class="register" id="changing">Register</li>
					<li>|</li>
					<li>Contact us</li>
					<li class="sc"><img src="images/sc.png" height="40vh"></li>
					</ul>
				</nav>
			</div>
			

			</div>
			<section id="home">
				<div id="features">
					<div  class="slider">
						<div id="slide 1">
							<img src="images/img1.jpg" >
							<div class="legend"><h1>Meet our renting system</h1></div>
						</div>
						<div id="slide 1">
							<img src="images/img1.jpg" >
							<div class="legend"><h1>Easier to rent</h1></div>
						</div>
					</div>
				</div>
				<div id="bottom">
					<h1 id="rentnow">Rent now</h1>
					<div id="products">

					</div>
					<footer>
						<ul class='files'>
						<li><a href='files/First_delivery_Rentlock.pdf'>1st Delivery PDF</a></li>
						<li><a href='files/Second_delivery_Rentlock.pdf'>2nd Delivery PDF</a></li>
						<li><a href='https://marvelapp.com/395eb3h/'>Marvelapp(Web)</a></li>
						<li><a href='https://marvelapp.com/2e0ai4b'>Marvelapp(app)</a></li>
						<li><a href='files/RENTLOCK_LOGIN.html'>Main interface</a></li>
						</ul>
					</footer>
				</div>
			</section>
			
			<!-- LOGIN -->
			<section id="login" >
				<h1 id='login-title'>Log in</h1>
				<div id="login-box">
				<div class="center">
				<input class='input-box' type='name' id="lusrn" placeholder='username*'></div>
				<div class="center">
				<input class='input-box' type='password' id="lpsw" placeholder='password*'></div>
				<div class="center">
				<input class='submit' type='submit' id="login-button" value='Log in'></div>
				<div class="center">
				<h1 class='register-button register'>Register</h1></div>
				</div>
			</section>

			<!-- Register -->
			<section id="register">
				<h1 id='login-title'>Register</h1>
				<div id="register-box">
				<div class="center2">
				<input class='input-box2' type='name' id="fname" placeholder='Name*'></div>
				<div class="center2">
				<input class='input-box2' type='name' id="uln" placeholder='Lastname*'></div>
				<div class="center2">
				<input class='input-box2' type='name' id="usrn" placeholder='Username*'></div>
				<div class="center2">
				<input class='input-box2' type='email' id="uemail" placeholder='Email*'></div>
				<div class="center2">
				<input class='input-box2' type='password' id="psw"  placeholder='Password*'></div>
				<div class="center2">
				<input class='input-box2' type='password' id="rpsw" placeholder='Re-enter password*'></div>
				<div class="center2">
				<input class='input-box2' type='name' id="city" placeholder='City*'></div>
				<div class="center2">
				<input class='input-box2' type='name' id="adress" placeholder='Adreess*'></div>
				<div class="center2">
				<input class='input-box2' type='name' id="zipcode" placeholder='Zipcode*'></div>
				<div class="center2">
				<input class='input-box2' type='name' id="tel" placeholder='Telephone*'></div>
				<div class="center2">
				<input class='submit' type='submit' id="register-button" value='Register'></div>
				<div class="center2">
				<input type="checkbox" name="terms" value='Register' id="checkbox_id">
				<label for="checkbox_id">I agree to the Terms and Conditions and the privacy policy</label></div>
				</div>

			</section>

			<!-- Rent out -->
			<section id="rentout">
				<h1 id='login-title'>Rent Out</h1>
				<div id="rentout-box">
				<div class="center2">
				<input class='input-box2' type='name' name='pname' id='pname' placeholder="Product's name*"></div>
				<div class="center2">
				<input class='input-box2' type='name' name='ppd' id='ppd' placeholder='Price per day*'></div>
				<div class="center2">
				<input class='input-box2' type='name' name='mird' id='mird' placeholder='Minimum renting days*'></div>
				<div class="center2">
				<input class='input-box2' type='name' name='mard' id='mard' placeholder='Maximum renting days*'></div>
				<div class="center2">
				<input class='input-box2' type='name'  name='fol' id='fol' placeholder='Fee of lost/theft*'></div>
				<div class="center2">
				<input class='input-box2' type='name'  name='fod' id='fod' placeholder='Fee of damage*'></div>
				<div class="center4">
				<select class='input-box2' type='name'  name='ll' id='ll' placeholder='Lockers location*'>
					<option value="Locker's location">Locker's location*</option>
					<option value="Mexico City">Mexico City</option>
					<option value="Guadalajara">Guadalajara</option>
					<option value="Monterrey">Monterrey</option>
				</select></div>
				<div class="center4">
				<select class='input-box2' type='name'  name='cat' id='cat' placeholder='Lockers location*'>
				<option value="Categories">Categories*</option>
					<option value="Books">Books</option>
					<option value="Clothing">Clothing</option>
					<option value="Electronics">Electronics</option>
					<option value="Jewerly">Jewerly</option>
					<option value="Other">Other</option>
				</select></div>
				<div class="center3">
				<input class='input-box2' type='name' name='iu' id='iu' placeholder="Image URL"></div>
				<div class="center2">
				<input class='input-box3' type='name' name='des' id='des' placeholder='Description*'></div>
				<div class="center">
				<input class='submit' id="upload" type='submit'  name='upload' value='Upload'></div>
				</div>
			</section>

			<section id="searchpage">
				<div id="aside">
					<div id="searchinfo">
						<h1></h1>
						<h3></h3>
					</div>
					<div id="productfilters">
						<!-- <div id="catsel" class="selecteditem" data-selectedmaterial="barro-negro"><span></span></div> -->
					</div>
					<h1 >Location:</h1>
					<h3 data-selectedlocation="Mexico City">Mexico City</h3>
					<h3 data-selectedlocation="Monterrey">Monterrey</h3>
					<h3 data-selectedlocation="Guadalajara">Guadalajara</h3>
					<h1>Categories:</h1>
					<h3 data-selectedcategory="Books">Books</h3>
					<h3 data-selectedcategory="Clothing">Clothing</h3>
					<h3 data-selectedcategory="Electronics">Electronics</h3>
					<h3 data-selectedcategory="Jewerly">Jewerly</h3>
					<h3 data-selectedcategory="Other">Other</h3>
				</div>
				<div id="productlist">

				</div>
			</section>

			<section id="cart">
				<h1 id='login-title'>Cart</h1>
				<div id="rentout-box">
					<div id="cartlist">

					</div>
				</div>
			</section>

			<div id="productpages">
			</div>
		</div>
		<script>
			$(document).ready(function(){
				$('.slider').bxSlider();
			});
		</script>
		<script>
			$(document).ready(function(){

				var isLoggedIn = false;
				var userLogged;

				if(!localStorage.getItem("products")){
				var products = [
					{"name":"Gamer Computer", "ppd":"$200 per day", "mird": "30","mard": "1",  "fol":'20000', "fod":"1000", "ll":"Mexico City", "img":"images/p1.png", "desc":"i7, GTX 1060, 8GB Ram, perfect conditions", "cat":"Electronics", "owner": "juan"},
					{"name":"The History of Medicine", "ppd":"$25 per day", "mird":"60", "mard":"1", "fol":'100', "fod":"100", "ll":"Monterrey", "img":"images/p2.png", "desc": "book of medicine by john hudson, good for students", "cat": "Books", "owner": "juan"},
					{"name":"Elegant watch", "ppd": "$50 per day", "mird":"7", "mard":"1","fol": '5000', "fod":"1000", "ll":"Guadalajara", "img":"images/p3.png", "desc":"elegant watch brand patito perfect for events and job interviews", "cat":"Clothing", "owner": "juan"},
					{"name":"Wedding Suit", "ppd":"$100 per day", "mird":"7", "mard":"1", "fol":'10000', "fod":"1000", "ll":"Mexico City","img": "images/p4.png", "desc":"perfect suit for wedding,  hand made by clothmaker", "cat": "Clothing", "owner": "juan"},
					{"name":"Sim card", "ppd":"$10 per day", "mird":"30", "mard":"1", "fol":'50', "fod":"50", "ll":"Mexico City", "img":"images/p5.png", "desc":"Sim Card by Telcel, perfect for traveling", "cat": "Electronics", "owner": "juan"}
				];}
				else{
					var products = getLocalStorageProducts();
				}
				

				localStorage.setItem("products", JSON.stringify(products));


				function showAllproducts(){
					for (var i = 0; i < products.length; i++) {
						$('#products').append("<div class='box'  id='p"+i+"'><img src='"+ products[i].img +"'><p>"+ products[i].ppd+"</p></div>");
					}
				}

				function showListproducts(){
					for (var i = 0; i < products.length; i++) {
						$('#productlist').append('<div class="boxlist" id="p'+i+'"><img src='+ products[i].img +'><h1 class="name">'+ products[i].name+'</h1><h3>By '+ products[i].owner +'</h3><h1>'+ products[i].ppd+'</h1><h3 id="de">'+ products[i].desc+'</h3></div>');
					}
				}

				var cart = [];


				function showCartproducts(){
					$('#cartlist').empty();
					for (var i = 0; i < cart.length; i++) {
						$('#cartlist').append('<div class="boxlist" id="p'+i+'"><img src='+ cart[i].img +'><h1>'+ cart[i].name+'</h1><h3>By '+ cart[i].owner +'</h3><h1>'+ cart[i].ppd+'</h1><h3 id="de">'+ cart[i].desc+'</h3></div>');
					}
				}

				function generateProductPages(products){
					$('#productpages').empty();
					for (var i = 0; i < products.length; i++) {
						$('#productpages').append("<section class='product-box hide' id='p"+i+"' ><img src="+ products[i].img +" ><h1 class='name'>"+ products[i].name +"</h1><h3>By "+ products[i].owner +"</h3><h1>"+ products[i].ppd +"</h1><h3>Fee of lost: "+products[i].fol+"</h3><h3>Fee of damage: "+products[i].fod+"</h3><h3>Minimum renting days: "+products[i].mird+"</h3><h3>Maximum renting days: "+products[i].mard+"</h3><h1>Locker's Location: "+products[i].ll+"</h1><h3 id='de'>"+products[i].desc+"<h3><input class='buy'  id='product-buttons' type='submit'  name='upload' value='Rent now'><input  id='product-buttons' class='addtocart' type='submit'  name='upload' value='Add to Cart'></section>");
					}	
				}
				$("body").on("click", ".addtocart" ,function() {
					var thiscart;
					for(var i = 0; i < products.length; i++) {
						if(products[i].name == $(this).parents().eq(1).find(".name").text()){
		       				cart.push(products[i]);
		       			}
	       			}
       			});

				for (var i = 0; i < products.length; i++) {
					$("body").on( "click", "#p"+i+"", function() {
	            		$("section").fadeOut();
	            		$('section#'+ $(this).attr("id") +'').fadeIn().delay(500);
	       			});
	       		}




				var users = [];

 				if(localStorage.getItem("users")){
 					var users = getLocalStorageUsers();
 				}

 				$("#search").keyup(function(event) {
 					if(event.which == 13){
 						$("section").fadeOut();
            			$('#searchpage').fadeIn().delay(500);
            			$('#hamburgermenu').slideUp();
            			var s = $(this).val();
            			searchFilter(s);
 					}
 						
 				});

 				function searchFilter(s){
 					var filteredProducts = [];
 					var a;
 					for (i = 0; i < products.length; i++) {
				        a = JSON.stringify(products[i]);
				        if (a.toUpperCase().indexOf(s.toUpperCase()) > -1) {
				            filteredProducts.push(products[i]);
				        } 
    				}
    				$("#productlist").empty();
    				for (var i = 0; i < filteredProducts.length; i++) {
						$('#productlist').append('<div class="boxlist" id="p'+i+'"><img src='+ filteredProducts[i].img +'><h1>'+ filteredProducts[i].name+'</h1><h3>By '+ filteredProducts[i].owner +'</h3><h1>'+ filteredProducts[i].ppd+'</h1><h3 id="de">'+ filteredProducts[i].desc+'</h3></div>');
					}
					$('#searchinfo').html("<h1>'"+s+"'</h1><h3>"+filteredProducts.length+" Results</h3>");
					generateProductPages(filteredProducts);
 				}

				$('.home').click(function(e) {
            		$("section").fadeOut();
            		$('#products').empty();
            		$('#home').fadeIn().delay(500);
            		$('#hamburgermenu').slideUp();
            		showAllproducts();
       			});

				$('body').on("click", ".login" ,function() {
            		$("section").fadeOut();
            		$('#login').fadeIn().delay(500);
            		$('#hamburgermenu').slideUp();
       			});
       			$('body').on("click", ".sc" ,function() {
            		$("section").fadeOut();
            		$('#cart').fadeIn().delay(500);
            		$('#hamburgermenu').slideUp();
            		showCartproducts();
       			});

       			$('body').on("click", ".register" ,function() {
            		$("section").fadeOut();
            		$('#register').fadeIn().delay(500);
            		$('#hamburgermenu').slideUp();
       			});
       			$('.rentout').click(function(e) {
            		$("section").fadeOut();
            		$('#rentout').fadeIn().delay(500);
            		$('#hamburgermenu').slideUp();
       			});
       			$('.searchpage').click(function(e) {
            		$("section").fadeOut();
            		$('#searchpage').fadeIn().delay(500);
            		$('#hamburgermenu').slideUp();
       			});

       			function saveProduct(){
       				products.push({ "name":  $('#pname').val(),  "ppd": $('#ppd').val(),  "mird": $('#mird').val(),"mard": $('#mard').val(), "fol": $('#fol').val(), "fod": $('#fod').val(), "ll":$('#ll').val(), "iu":$('#iu').val(), "desc":$('#des').val(), "cat": $('#cat').val(), "owner" : users[userLogged].usrn});
       	
       				localStorage.setItem("products", JSON.stringify(products));
       	
       			}

       			function registerUser(){
       				users.push({ "fname": $('#fname').val() ,  "uln": $('#uln').val(),  "usrn": $('#usrn').val(),"uemail": $('#uemail').val(), "psw": $('#psw').val(), "rpsw": $('#rpsw').val(), "city":$('#city').val(), "adress":$('#adress').val(), "zipcode":$('#zipcode').val(), "tel": $('#tel').val() });
       				localStorage.setItem("users", JSON.stringify(users));
       			}

       			$('#upload').click(function(e) {
	       			if(isLoggedIn){
	            		saveProduct();
	            	}
       			});

       			
       			$('#register-button').click(function(e) {
       				if($('#psw').val() == $('#rpsw').val()){
            			registerUser();
            		}
            		else{
            			window.alert("the passwords are not equal");
            		}
       			});
       			$('#login-button').click(function(e) {
       				var correct = false;
       				for(var i = 0; i<users.length; i++ ){
	       				if (($('#lusrn').val() == users[i].usrn) && ($('#lpsw').val() == users[i].psw)){
	            			window.alert("login succesful");
	            			correct = true;
	            			userLogged = i;
	            			isLoggedIn = true;
	            			login();
	            		}
	            	}
	            	if(!correct){
	            		window.alert("usr and psw dont match");
	            	}
       			});

       			$('body').on("click", ".logout" ,function() {
       				logout();
       			});

       			function getLocalStorageProducts(){
	       			if(localStorage.getItem("products")){

	       				products = JSON.parse(localStorage.getItem("products"));
						
	       			}
	       			return products;
	       			
       			}

       			function getLocalStorageUsers(){
	       			if(localStorage.getItem("users")){

	       				users = JSON.parse(localStorage.getItem("users"));
						
	       			}
	       			return users;	
       			}

       			function login(){
       				if(isLoggedIn){
       					$('#usrprofile').text(users[userLogged].fname);
       					$('#changing').text("Log out");
       					$('#changing').removeClass('register').addClass('logout');
       					$('#usrprofile').removeClass('login').addClass('myprofile profilepic');
       					$('li#usrprofile').text(users[userLogged].fname + " (My Profile)");
       					$('li#changing').text("Log out");
       					$('li#changing').removeClass('register').addClass('logout');
       					$('li#usrprofile').removeClass('login').addClass('myprofile profilepic');
       				}
       			}
       			function logout(){
       				isLoggedIn = false;
       				$('#usrprofile').text("Log In");
       				$('#changing').text("Register");
       				$('#changing').removeClass('logout').addClass('register');
       				$('#usrprofile').removeClass('myprofile profilepic').addClass('login');
       				$('li#usrprofile').text("Log In");
       				$('li#changing').text("Register");
       				$('li#changing').removeClass('logout').addClass('register');
       				$('li#usrprofile').removeClass('myprofile profilepic').addClass('login');
       			}
       			$('.hamburger').click(function(e){
       				$('#hamburgermenu').slideToggle();
       			});

       			showAllproducts();
       			showListproducts();
       			generateProductPages(products);

       			$(window).resize(function(){     
					if ($("body").width() > 1160 ){
						$("#hamburgermenu").show();
					}
					if ($("body").width() <= 1660 ){
						$("#hamburgermenu").hide();
					}
				});


			});	
		</script>
	</body>
</html>